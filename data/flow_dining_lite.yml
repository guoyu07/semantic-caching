-
  type: BaiduSource
  # init_args: [121.297198, 31.209686, 121.489795, 31.074682]
  init_args: [121.397198, 31.209686, 121.409795, 31.174682, 3]
-
  type: WebAction
  actor: Baidu
  method: search
  input:
    lng: { map: [ origin, lng ], post: [round, 3] }
    lat: { map: [ origin, lat ], post: [round, 3] }
    q: [ query, q ]
    radius: [ query, radius ]
  output:
    hotel: [ results, 0 ]
  description: Get a nearby restaurant
-
  type: Parallel
  branches:
    -
      -  
        type: WebAction
        actor: Baidu
        method: detail
        input: 
          uid: [ hotel, uid ]
        output:
          detail: [ result, detail_info ]
        description: get the deatils of that restaurant
      -
        type: WebAction
        actor: Baidu
        method: event_detail
        input:
          uid: [ hotel, uid]
        output:
          events: [ result, events ]
        description: get the events of that restaurant
    -
      -
        type: WebAction
        actor: Baidu
        method: locate
        input:
          lat: { map: [ hotel, location, lat ], post: [round, 3] }
          lng: { map: [ hotel, location, lng ], post: [round, 3] }
        output: 
          area_addr: [ result, addressComponent ]
        description: get the addr component of origin
      -
        type: WebAction
        actor: Convert
        method: open_weather
        input:
          name_cn: [ area_addr, district ]
          prov_cn: [ area_addr, province ]
        output:
          area: [ results, 0 ]
        description: convert address to area_id
      # forecast and index can run parallel
      - 
        type: Parallel
        branches:
          -
            - 
              type: WebAction
              actor: OpenWeather
              input:
                areaid: [ area, id ]
              output:
                index: [ i ]
              method: index_v
              description: get the index
          -  
            -
              type: WebAction
              actor: OpenWeather
              method: forecast_v
              input:
                areaid: [ area, id ]
              output:
                weather: [c]
                forecast: [f]
              description: get the forecast
