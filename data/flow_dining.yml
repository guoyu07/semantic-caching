-
  type: WebAction
  actor: Baidu
  method: search
  input:
    lng: [ origin, lng ]
    lat: [ origin, lat ]
    q: [ query, q ]
    radius: [ query, radius ]
  output:
    hotel: [ results, 0 ]
  description: Get a nearby restaurant
-
  type: Parallel
  branches:
    -
      -  
        type: WebAction
        actor: Baidu
        method: detail
        input: 
          uid: [ hotel, uid ]
        output:
          detail: [ result, detail_info ]
        description: get the deatils of that restaurant
      -
        type: WebAction
        actor: Baidu
        method: event_detail
        input:
          uid: [ hotel, uid]
        output:
          events: [ result, events ]
        description: get the events of that restaurant
    -
      -
        type: WebAction
        actor: Baidu
        method: locate
        input:
          lat: [ origin, lat ]
          lng: [ origin, lng ]
        output: 
          area_addr: [ result, addressComponent ]
        description: get the addr component of origin
      -
        type: WebAction
        actor: Convert
        method: open_weather
        input:
          name_cn: [ area_addr, district ]
          prov_cn: [ area_addr, province ]
        output:
          area: [ results, 0 ]
        description: convert address to area_id
      # forecast and index can run parallel
      -
        type: WebAction
        actor: OpenWeather
        method: forecast_f
        input:
          areaid: [ area, id ]
        output:
          cur_weather: [c]
          forecast: [f]
        description: get the forecast
      -
        type: WebAction
        actor: OpenWeather
        input:
          areaid: [ area, id ]
        output:
          index: [ i ]
        method: index_f
        description: get the index
      -
        type: Exclusive
        condition: 
        prob:
        branches:
          -
            -
              type: WebAction
              actor: Baidu
              method: search
              input:
                # location of origin or destination
                lng: [ origin, lng ]
                lat: [ origin, lat ]
                q: '停车场'
                radius: [ query, radius ]
              output:
                parking_lot: [ results, 0 ]
              description: find a nearby parking lot
            -
              type: WebAction
              actor: Baidu
              method: direct
              input: 
                org_lng: [ origin, lng ]
                org_lat: [ origin, lat ]
                dest_lng: [ parking_lot, location, lng ]
                dest_lat: [ parking_lot, location, lat ]
              output:
                direct_to_park: [ result ]
              description: Get the routes to the restaurant
            -
              type: WebAction
              actor: Baidu
              method: direct
              input: 
                org_lng: [ parking_lot, location, lng ]
                org_lat: [ parking_lot, location, lat ]
                dest_lng: [ hotel, location, lng ]
                dest_lat: [ hotel, location, lat ]
              output:
                direct_to_hotel: [ result ]
              description: Get the routes to the restaurant
          -
            -
              type: WebAction
              actor: Baidu
              method: direct
              input: 
                org_lng: [ origin, lng ]
                org_lat: [ origin, lat ]
                dest_lng: [ hotel, location, lng ]
                dest_lat: [ hotel, location, lat ]
              output:
                direction: [ result ]
              description: Get the routes to the restaurant
